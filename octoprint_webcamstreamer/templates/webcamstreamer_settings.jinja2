<form class="form-horizontal">
    <h4>WebcamStreamer Viewer</h4>
    <div class="control-group">
        <label class="control-label">{{ _('Viewer Embed URL') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.webcamstreamer.embed_url" placeholder="Example: https://www.youtube.com/embed/live_stream?channel=XXXXXXXX">
            <span class="help-block">The URL of the embeddable video player displaying the live stream in the WebcamStreamer tab.</span>
        </div>
    </div>
    <div class="viewer_additional">
        <div><small><a href="#" class="muted" data-bind="toggleContent: { class: 'fa-caret-right fa-caret-down', parent: '.viewer_additional', container: '.hide' }"><i class="fa fa-caret-right"></i> Additional Information</a></small></div>
        <div class="hide">
            <table class="table table-striped table-condensed table-fit">
                <caption>More on "Viewer Embed URL"</caption>
                <thead>
                <tr>
                    <th>Service</th>
                    <th>Example URL</th>
                    <th>Note</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>YouTube Live</td>
                    <td>https://www.youtube.com/embed/live_stream?channel=CHANNEL_ID</td>
                    <td><a href="http://www.youtube.com/account_advanced" target="_blank" rel="noopener">Advanced Account Settings</a></td>
                </tr>
                <tr>
                    <td>Twitch</td>
                    <td>https://player.twitch.tv/?channel=USERNAME</td>
                    <td></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</form>
<form class="form-horizontal">
    <h4>WebcamStreamer Stream Parameters</h4>
    <div class="control-group">
        <label class="control-label">{{ _('Stream Server URL') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.webcamstreamer.stream_url" placeholder="Example: rtmp://a.rtmp.youtube.com/live2/xxxx-xxxx-xxxx-xxxx">
            <span class="help-block">The destination URL for the streaming server. This URL typically contains the secret stream name or stream key.</span>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('FFMPEG filters') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.webcamstreamer.filters" placeholder="Example: drawtext=fontcolor=red:fontsize=30:fontfile=/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf:text=Stream title">
            <span class="help-block">FFmpeg Video filters.</span>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('OctoPi Webcam URL') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.webcamstreamer.webcam_url" placeholder="Example: http://192.168.1.10:8080/?action=stream">
            <span class="help-block">The fully qualified URL including hostname or IP address for the OctoPi webcam.</span>
        </div>
    </div>
    <div class="control-group" title="Stream while printing">
        <div class="controls">
            <label class="checkbox">
                <input type="checkbox" data-bind="checked: settings.plugins.webcamstreamer.auto_start"> Stream While Printing
            </label>
        </div>
    </div>
    <div class="stream_additional">
        <div><small><a href="#" class="muted" data-bind="toggleContent: { class: 'fa-caret-right fa-caret-down', parent: '.stream_additional', container: '.hide' }"><i class="fa fa-caret-right"></i> Additional Information</a></small></div>
        <div class="hide">
            <table class="table table-striped table-condensed table-fit">
                <caption>More on "Stream Server URL"</caption>
                <thead>
                <tr>
                    <th>Service</th>
                    <th>Link to information</th>
                    <th>Example URL</th>
                </tr>
                </thead>
                <tr>
                    <td>YouTube Live</td>
                    <td><a href="https://www.youtube.com/live_dashboard" target="_blank" rel="noopener">Live Streaming Dashboard</a></td>
                    <td>rtmp://a.rtmp.youtube.com/live2/xxxx-xxxx-xxxx-xxxx</td>
                </tr>
                <tr>
                    <td>Twitch</td>
                    <td><a href="https://www.twitch.tv/dashboard/settings" target="_blank" rel="noopener">Channel Dashboard</a></td>
                    <td>rtmp://live.twitch.tv/app/live_xxxxxxxxx_xxxxxxxxxx</td>
                </tr>
            </table>
        </div>
    </div>
</form>
<form class="form-horizontal">
    <h4>Advanced Settings</h4>
    <div class="control-group">
        <label class="control-label">{{ _('Webcam Frame Rate') }}</label>
        <div class="controls">
            <div class="input-append">
                <input type="number" class="input-mini" min="1" max="60" data-bind="value: settings.plugins.webcamstreamer.frame_rate">
                <span class="add-on">fps</span>
            </div>
            <span class="help-block">The OctoPi webcam frame rate (default: {{ plugin_webcamstreamer_frame_rate_default | escape }} fps).</span>
        </div>
    </div>

        <div class="control-group">
        <label class="control-label">{{ _('FFmpeg Command') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.webcamstreamer.ffmpeg_cmd">
            <span class="help-block"><b>Expert Use Only!</b> This is the FFmpeg command that is passed for streaming activity. Variable substitution is performed to insert the appropriate values into the command line. Consult the FFmpeg manual for details on its use.</span>
        </div>
    </div>
    <div class="ffmpeg_additional">
        <div><small><a href="#" class="muted" data-bind="toggleContent: { class: 'fa-caret-right fa-caret-down', parent: '.ffmpeg_additional', container: '.hide' }"><i class="fa fa-caret-right"></i> Additional Information</a></small></div>
        <div class="hide">
            <p>FFmpeg default value: <pre><code>{{ plugin_webcamstreamer_ffmpeg_cmd_default | escape }}</code></pre></p>
            <table class="table table-striped table-condensed table-fit">
                <caption>FFmpeg command substitutions"</caption>
                <thead>
                <tr>
                    <th>FFmpeg Cmd Var</th>
                    <th>Settings Value</th>
                </tr>
                </thead>
                <tr>
                    <td>{stream_url}</td>
                    <td>Stream Server URL</td>
                </tr>
                <tr>
                    <td>{webcam_url}</td>
                    <td>OctoPi Webcam URL</td>
                </tr>
                <tr>
                    <td>{frame_rate}</td>
                    <td>OctoPi Webcam Frame Rate</td>
                </tr>
                <tr>
                    <td>{gop_size}</td>
                    <td>Internal Calculated Value (frame rate * 2)</td>
                </tr>
                <tr>
                    <td>{filter}</td>
                    <td>FFmpeg filters</td>
                </tr>
            </table>
        </div>
    </div>
</form>
